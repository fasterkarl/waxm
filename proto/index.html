<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ai心理学家 - 微信小程序原型</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- 微信小程序模拟容器 -->
    <div class="wechat-container">
      <!-- 浮动菜单按钮 -->
      <button class="floating-menu-btn" id="menuBtn">
        <span class="menu-icon"></span>
      </button>

      <!-- 侧边菜单 -->
      <div class="side-menu" id="sideMenu">
        <div class="menu-overlay" id="menuOverlay"></div>
        <div class="menu-content">
          <div class="menu-header">
            <div class="user-avatar">👤</div>
            <div class="user-info">
              <div class="user-name">张老师</div>
              <div class="user-role">心理辅导教师</div>
            </div>
          </div>
          <div class="menu-items">
            <div class="menu-item" data-page="home">
              <span class="menu-item-icon">🏠</span>
              <span class="menu-item-text">智能助手</span>
            </div>
            <div class="menu-item" data-page="assessment">
              <span class="menu-item-icon">📊</span>
              <span class="menu-item-text">心理测评</span>
            </div>
            <div class="menu-item" data-page="case-filter">
              <span class="menu-item-icon">🔍</span>
              <span class="menu-item-text">案例检索</span>
            </div>
            <div class="menu-item" data-page="mentor-36">
              <span class="menu-item-icon">🎓</span>
              <span class="menu-item-text">导师工具包</span>
            </div>
            <div class="menu-item" data-page="smart-assessment">
              <span class="menu-item-icon">🧠</span>
              <span class="menu-item-text">心理状态评估</span>
            </div>
            <div class="menu-divider"></div>
            <div class="menu-item" data-page="profile">
              <span class="menu-item-icon">⚙️</span>
              <span class="menu-item-text">个人中心</span>
            </div>
            <div class="menu-divider"></div>
            <div class="menu-item" id="hideMenuBtn">
              <span class="menu-item-icon">✖️</span>
              <span class="menu-item-text">隐藏菜单</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 页面内容区域 -->
      <div class="page-content" id="pageContent">
        <!-- 智能体聊天首页 -->
        <div id="home" class="page chat-page">
          <div class="messages-wrap">
            <!-- 聊天消息区域 -->
            <div class="chat-messages" id="chatMessages">
              <!-- 欢迎消息 -->
              <div class="message-group ai-message" id="welcomeMessage">
                <div class="message-avatar">🤖</div>
                <div class="message-content">
                  <div class="message-bubble welcome-bubble">
                    <div class="welcome-header">
                      <span class="wave-emoji">👋</span>
                      <strong id="greetingText">张老师，下午好！</strong>
                    </div>

                    <!-- 天气信息卡片 -->
                    <div class="weather-card" id="weatherCard">
                      <div class="weather-left">
                        <div class="weather-icon">🌤️</div>
                        <div class="weather-label">今天天气</div>
                      </div>
                      <div class="weather-info">
                        <div class="weather-temp">
                          <span class="temp-value">22°C</span>
                          <span class="weather-desc">多云转晴</span>
                        </div>
                        <div class="weather-tips">
                          <span class="tip-icon">💡</span>
                          <span class="tip-text">天气不错，适合户外活动</span>
                        </div>
                      </div>
                    </div>

                    <p class="welcome-intro">
                      我是您的智能心理辅导助手，可以帮您：
                    </p>
                    <div class="feature-menu-grid">
                      <div
                        class="feature-menu-item-compact"
                        data-page="assessment"
                      >
                        <div class="feature-icon-compact">📊</div>
                        <div class="feature-title-compact">心理测评</div>
                      </div>
                      <div
                        class="feature-menu-item-compact"
                        data-page="case-filter"
                      >
                        <div class="feature-icon-compact">🔍</div>
                        <div class="feature-title-compact">案例检索</div>
                      </div>
                    </div>
                    <p class="hint-text">
                      💬 也可以直接输入您的需求，我会智能识别并帮助您
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- 聊天输入区域（固定在顶部） -->
            <div class="chat-input-container-fixed">
              <div class="chat-input-wrapper" id="chatInputWrapper">
                <button
                  class="input-mode-btn"
                  id="inputModeBtn"
                  title="切换到语音输入"
                >
                  <span class="mode-icon">🎤</span>
                </button>
                <input
                  type="text"
                  class="chat-input"
                  id="chatInput"
                  placeholder="输入您的问题或需求..."
                />
                <button
                  class="voice-input-btn"
                  id="voiceInputBtn"
                  style="display: none"
                >
                  <span class="voice-wave"></span>
                  <span class="voice-text">按住说话</span>
                </button>
                <button class="send-btn" id="sendBtn">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M2 10L18 2L10 18L8 11L2 10Z" fill="currentColor" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 案例筛选页面 -->
        <div id="case-filter" class="page" style="display: none">
          <div class="page-header">
            <h2>案例筛选</h2>
            <p>根据学生情况匹配相似案例</p>
          </div>
          <div class="page-content">
            <div class="card">
              <div class="filter-section">
                <h3 class="filter-section-title">学生基础信息</h3>
                <div class="filter-group">
                  <div>
                    <label>年龄</label>
                    <input
                      type="number"
                      class="input-field"
                      placeholder="请输入年龄"
                      id="student-age"
                    />
                  </div>
                  <div>
                    <label>性别</label>
                    <div class="radio-group">
                      <label class="radio-option">
                        <input
                          type="radio"
                          name="gender"
                          value="male"
                          class="radio-input"
                        />
                        <span class="radio-label">男</span>
                      </label>
                      <label class="radio-option">
                        <input
                          type="radio"
                          name="gender"
                          value="female"
                          class="radio-input"
                        />
                        <span class="radio-label">女</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label>身高 (cm)</label>
                    <input
                      type="number"
                      class="input-field"
                      placeholder="请输入身高"
                      id="student-height"
                    />
                  </div>
                  <div>
                    <label>体重 (kg)</label>
                    <input
                      type="number"
                      class="input-field"
                      placeholder="请输入体重"
                      id="student-weight"
                    />
                  </div>
                </div>
              </div>

              <div class="filter-section">
                <h3 class="filter-section-title">心理问题维度</h3>
                <div class="filter-group">
                  <div>
                    <label>问题关键词</label>
                    <input
                      type="text"
                      class="input-field"
                      placeholder="如：考前焦虑、亲子沟通障碍"
                      id="problem-keywords"
                    />
                  </div>
                  <div>
                    <label>问题严重程度</label>
                    <div class="radio-group">
                      <label class="radio-option">
                        <input
                          type="radio"
                          name="severity"
                          value="mild"
                          class="radio-input"
                        />
                        <span class="radio-label">轻度</span>
                      </label>
                      <label class="radio-option">
                        <input
                          type="radio"
                          name="severity"
                          value="moderate"
                          class="radio-input"
                        />
                        <span class="radio-label">中度</span>
                      </label>
                      <label class="radio-option">
                        <input
                          type="radio"
                          name="severity"
                          value="severe"
                          class="radio-input"
                        />
                        <span class="radio-label">重度</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label>学生学段</label>
                    <select class="select-field" id="student-grade">
                      <option value="">请选择学段</option>
                      <option value="primary">小学</option>
                      <option value="middle">初中</option>
                      <option value="high">高中</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="filter-section">
                <h3 class="filter-section-title">具体情况描述</h3>
                <textarea
                  class="input-field"
                  placeholder="请详细描述学生的具体情况..."
                  rows="4"
                  id="case-description"
                ></textarea>
              </div>

              <div class="filter-actions">
                <button class="btn btn-reset" onclick="resetFilters()">
                  重置条件
                </button>
                <button
                  class="btn btn-primary btn-search"
                  onclick="searchCases()"
                >
                  查询案例
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 案例库页面 -->
        <div id="case-library" class="page" style="display: none">
          <div class="page-header">
            <h2>案例列表</h2>
            <div class="case-list-header">
              <div class="filter-tags" id="filter-tags">
                <!-- 筛选标签将通过JavaScript动态生成 -->
              </div>
              <button
                class="btn btn-secondary btn-small"
                onclick="backToFilter()"
              >
                修改筛选
              </button>
            </div>
          </div>
          <div class="page-content">
            <div id="case-list">
              <!-- 案例列表将通过JavaScript动态生成 -->
            </div>
          </div>
        </div>

        <!-- 测评页面 -->
        <div id="assessment" class="page" style="display: none">
          <div class="page-header-bar">
            <button class="back-btn" onclick="app.navigateToHome()">
              ← 返回
            </button>
            <h2 class="page-title">心理测评</h2>
            <div class="header-placeholder"></div>
          </div>
          <div class="page-body">
            <div class="search-bar">
              <span>🔍</span>
              <input type="text" placeholder="搜索心理测评量表..." />
            </div>

            <div class="filter-tabs">
              <div class="filter-tab active">全部</div>
              <div class="filter-tab">小学</div>
              <div class="filter-tab">初中</div>
              <div class="filter-tab">高中</div>
              <div class="filter-tab">情绪</div>
              <div class="filter-tab">学习</div>
            </div>

            <div class="assessment-list">
              <div
                class="assessment-card"
                onclick="app.showToast('打开测评详情')"
              >
                <div class="assessment-card-header">
                  <div class="assessment-badge">⭐ 常用</div>
                </div>
                <div class="assessment-card-title">中学生情绪稳定性测评</div>
                <div class="assessment-card-desc">
                  评估学生情绪调节能力和抗压能力
                </div>
                <div class="assessment-card-meta">
                  <span>⏱ 15分钟</span>
                  <span>🔘 单选题</span>
                  <span>📊 30题</span>
                </div>
              </div>

              <div
                class="assessment-card"
                onclick="app.showToast('打开测评详情')"
              >
                <div class="assessment-card-header">
                  <div class="assessment-badge recent">🔄 最近使用</div>
                </div>
                <div class="assessment-card-title">学习适应性测评量表</div>
                <div class="assessment-card-desc">
                  检测学习习惯和课堂适应能力
                </div>
                <div class="assessment-card-meta">
                  <span>⏱ 20分钟</span>
                  <span>☑ 多选题</span>
                  <span>📊 25题</span>
                </div>
              </div>

              <div
                class="assessment-card"
                onclick="app.showToast('打开测评详情')"
              >
                <div class="assessment-card-header">
                  <div class="assessment-badge pro">📈 专业版</div>
                </div>
                <div class="assessment-card-title">社交能力评估量表</div>
                <div class="assessment-card-desc">
                  测量学生人际交往和团队协作能力
                </div>
                <div class="assessment-card-meta">
                  <span>⏱ 25分钟</span>
                  <span>📊 滑动评分</span>
                  <span>📊 40题</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 智能评估页面 -->
        <div id="smart-assessment" class="page" style="display: none">
          <div class="page-header-bar">
            <button class="back-btn" onclick="app.navigateToHome()">
              ← 返回
            </button>
            <h2 class="page-title">心理状态评估</h2>
            <div class="header-placeholder"></div>
          </div>
          <div class="page-body">
            <div class="intro-card">
              <div class="intro-icon">🧠</div>
              <div class="intro-text">
                <h3>AI智能心理评估</h3>
                <p>
                  输入学生情况，AI为您生成专业的评估意见、辅导建议和家访大纲
                </p>
              </div>
            </div>

            <div class="card">
              <h3 style="font-size: 15px; margin-bottom: 12px">学生基本信息</h3>
              <div style="display: grid; gap: 12px">
                <input type="text" class="input-field" placeholder="学生姓名" />
                <div
                  style="
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 12px;
                  "
                >
                  <input type="number" class="input-field" placeholder="年龄" />
                  <select class="input-field">
                    <option value="">性别</option>
                    <option value="male">男</option>
                    <option value="female">女</option>
                  </select>
                </div>
                <input type="text" class="input-field" placeholder="年级班级" />
              </div>
            </div>

            <div class="card">
              <h3 style="font-size: 15px; margin-bottom: 12px">问题描述</h3>
              <textarea
                class="input-field"
                placeholder="请详细描述学生的心理问题、行为表现、家庭背景等信息..."
                rows="6"
              ></textarea>
            </div>

            <div class="assessment-options">
              <div class="option-card">
                <div class="option-icon">📋</div>
                <div class="option-title">评估意见</div>
              </div>
              <div class="option-card">
                <div class="option-icon">💡</div>
                <div class="option-title">辅导建议</div>
              </div>
              <div class="option-card">
                <div class="option-icon">🏠</div>
                <div class="option-title">家访大纲</div>
              </div>
            </div>

            <button
              class="btn btn-primary"
              style="width: 100%; margin-top: 20px"
              onclick="app.showToast('正在生成智能评估...')"
            >
              🚀 开始智能评估
            </button>
          </div>
        </div>

        <!-- 导师36计页面 -->
        <div id="mentor-36" class="page" style="display: none">
          <div class="page-header-bar">
            <button class="back-btn" onclick="app.navigateToHome()">
              ← 返回
            </button>
            <h2 class="page-title">导师工具包</h2>
            <div class="header-placeholder"></div>
          </div>
          <div class="page-body">
            <div class="intro-card">
              <div class="intro-icon">🎓</div>
              <div class="intro-text">
                <h3>心理辅导实战技巧</h3>
                <p>36个经典心理辅导方法，助您成为专业心理导师</p>
              </div>
            </div>

            <div class="video-list">
              <div class="video-card" data-video-id="1">
                <div class="video-thumbnail">
                  <div class="video-play-icon">▶</div>
                  <div class="video-duration">12:35</div>
                </div>
                <div class="video-info">
                  <div class="video-title">第1计：倾听的艺术</div>
                  <div class="video-meta">
                    <span>👁 2.3k</span>
                    <span>⏱ 12分钟</span>
                  </div>
                </div>
              </div>

              <div class="video-card" data-video-id="2">
                <div class="video-thumbnail">
                  <div class="video-play-icon">▶</div>
                  <div class="video-duration">15:20</div>
                </div>
                <div class="video-info">
                  <div class="video-title">第2计：共情技巧</div>
                  <div class="video-meta">
                    <span>👁 1.8k</span>
                    <span>⏱ 15分钟</span>
                  </div>
                </div>
              </div>

              <div class="video-card" data-video-id="3">
                <div class="video-thumbnail">
                  <div class="video-play-icon">▶</div>
                  <div class="video-duration">18:45</div>
                </div>
                <div class="video-info">
                  <div class="video-title">第3计：提问的力量</div>
                  <div class="video-meta">
                    <span>👁 3.1k</span>
                    <span>⏱ 18分钟</span>
                  </div>
                </div>
              </div>

              <div class="video-card" data-video-id="4">
                <div class="video-thumbnail">
                  <div class="video-play-icon">▶</div>
                  <div class="video-duration">14:10</div>
                </div>
                <div class="video-info">
                  <div class="video-title">第4计：情绪管理</div>
                  <div class="video-meta">
                    <span>👁 2.7k</span>
                    <span>⏱ 14分钟</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 视频详情页 -->
        <div id="video-detail" class="page" style="display: none">
          <div class="page-header-bar">
            <button class="back-btn" onclick="app.navigateToPage('mentor-36')">
              ← 返回
            </button>
            <h2 class="page-title">课程详情</h2>
            <div class="header-placeholder"></div>
          </div>
          <div class="page-body">
            <div class="video-player">
              <div class="video-player-placeholder">
                <div class="video-play-btn">▶</div>
                <div class="video-title-overlay">第1计：倾听的艺术</div>
              </div>
            </div>

            <div class="video-detail-info">
              <h2 class="video-detail-title">第1计：倾听的艺术</h2>
              <div class="video-detail-meta">
                <span>👁 2.3k次观看</span>
                <span>⏱ 12分35秒</span>
                <span>📅 2025-10-01</span>
              </div>
            </div>

            <div class="card">
              <h3 style="font-size: 15px; margin-bottom: 12px">📖 课程介绍</h3>
              <p style="line-height: 1.8; color: var(--text-secondary)">
                倾听是心理辅导中最基础也是最重要的技能。本课程将教您如何通过有效倾听，建立与学生的信任关系，深入了解学生的内心世界。
              </p>
              <br />
              <p style="line-height: 1.8; color: var(--text-secondary)">
                <strong>课程要点：</strong><br />
                • 倾听的三个层次<br />
                • 积极倾听的技巧<br />
                • 如何避免倾听中的常见误区<br />
                • 实战案例分析
              </p>
            </div>

            <div class="card">
              <h3 style="font-size: 15px; margin-bottom: 12px">💬 学习笔记</h3>
              <textarea
                class="input-field"
                placeholder="记录您的学习心得..."
                rows="4"
              ></textarea>
              <button
                class="btn btn-secondary"
                style="width: 100%; margin-top: 12px"
              >
                保存笔记
              </button>
            </div>
          </div>
        </div>

        <!-- 个人中心页面 -->
        <div id="profile" class="page" style="display: none">
          <div class="page-header-bar">
            <button class="back-btn" onclick="app.navigateToHome()">
              ← 返回
            </button>
            <h2 class="page-title">个人中心</h2>
            <div class="header-placeholder"></div>
          </div>
          <div class="page-body">
            <!-- 用户信息卡片 -->
            <div class="profile-header-card">
              <div class="profile-avatar">👤</div>
              <div class="profile-info">
                <div class="profile-name">张老师</div>
                <div class="profile-role">心理辅导教师</div>
                <div class="profile-id">工号：T20250001</div>
              </div>
              <button class="btn btn-secondary btn-small" style="color: #fff">
                编辑资料
              </button>
            </div>

            <!-- 会员状态卡片 -->
            <div class="membership-card" id="membershipCard">
              <div class="membership-header">
                <div class="membership-icon" title="点击切换会员状态（演示）">
                  👑
                </div>
                <div class="membership-title">会员服务</div>
              </div>
              <div class="membership-badge-container" id="membershipBadge">
                <!-- 会员标识将通过JavaScript动态生成 -->
              </div>
            </div>

            <!-- 统计数据 -->
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-number">128</div>
                <div class="stat-label">测评记录</div>
              </div>
              <div class="stat-item">
                <div class="stat-number">45</div>
                <div class="stat-label">案例收藏</div>
              </div>
              <div class="stat-item">
                <div class="stat-number">32</div>
                <div class="stat-label">评估记录</div>
              </div>
            </div>

            <!-- 功能列表 -->
            <div class="card">
              <div
                class="profile-menu-item"
                onclick="app.showToast('我的个案')"
              >
                <div class="profile-menu-left">
                  <span class="profile-menu-icon">⭐</span>
                  <span class="profile-menu-text">我的个案</span>
                </div>
                <span class="profile-menu-arrow">›</span>
              </div>
              <div
                class="profile-menu-item"
                onclick="app.showToast('我的工作台')"
              >
                <div class="profile-menu-left">
                  <span class="profile-menu-icon">🛡️</span>
                  <span class="profile-menu-text">我的工作台</span>
                </div>
                <span class="profile-menu-arrow">›</span>
              </div>
              <div
                class="profile-menu-item"
                onclick="app.showToast('订单中心')"
              >
                <div class="profile-menu-left">
                  <span class="profile-menu-icon">📋</span>
                  <span class="profile-menu-text">订单中心</span>
                </div>
                <span class="profile-menu-arrow">›</span>
              </div>
            </div>

            <!-- 设置选项 -->
            <div class="card">
              <div
                class="profile-menu-item"
                onclick="app.showToast('帮助与反馈')"
              >
                <div class="profile-menu-left">
                  <span class="profile-menu-icon">❓</span>
                  <span class="profile-menu-text">帮助与反馈</span>
                </div>
                <span class="profile-menu-arrow">›</span>
              </div>
              <div
                class="profile-menu-item"
                onclick="app.showToast('关于我们')"
              >
                <div class="profile-menu-left">
                  <span class="profile-menu-icon">ℹ️</span>
                  <span class="profile-menu-text">关于我们</span>
                </div>
                <span class="profile-menu-arrow">›</span>
              </div>
              <div
                class="profile-menu-item"
                onclick="app.showToast('用户隐私协议')"
              >
                <div class="profile-menu-left">
                  <span class="profile-menu-icon">📖</span>
                  <span class="profile-menu-text">用户隐私协议</span>
                </div>
                <span class="profile-menu-arrow">›</span>
              </div>
            </div>

            <!-- 退出登录 -->
            <button
              class="btn btn-secondary"
              style="width: 100%; margin-top: 20px"
              onclick="app.showToast('退出登录')"
            >
              退出登录
            </button>
          </div>
        </div>

        <!-- 其他页面内容... -->
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
