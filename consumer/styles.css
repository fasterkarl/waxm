:root {
    --primary: #5B8C5A;
    --primary-dark: #3D6B3C;
    --primary-light: #7BA87A;
    --accent: #E8B86D;
    --accent-light: #F5DEB3;
    --danger: #E57373;
    --danger-dark: #C62828;
    --warning: #FF9800;
    --success: #4CAF50;
    --text-primary: #1A2E1A;
    --text-secondary: #5A6B5A;
    --text-muted: #9CA69C;
    --bg-primary: #FDFCF8;
    --bg-secondary: #F5F9F5;
    --bg-card: rgba(255,255,255,0.95);
    --border-light: rgba(0,0,0,0.06);
    --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
    --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
    --shadow-lg: 0 8px 32px rgba(91,140,90,0.12);
    --radius-sm: 12px;
    --radius-md: 20px;
    --radius-lg: 28px;
    --safe-bottom: env(safe-area-inset-bottom);
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { font-family: 'Inter', 'Noto Sans SC', -apple-system, sans-serif; background: #e9efe900; min-height: 100vh; display: flex; justify-content: center; align-items: center; }

/* Phone Shell */
.phone { width: 393px; height: 852px; background: var(--bg-primary); border-radius: 54px; position: relative; overflow: hidden; box-shadow: 0 0 0 12px #1f1f1f, 0 0 0 14px #333, 0 40px 80px rgba(0,0,0,0.5); }
.status-bar { height: 54px; padding: 12px 28px 0; display: flex; justify-content: space-between; align-items: center; font-size: 15px; font-weight: 600; position: relative; z-index: 100; }
.status-icons { display: flex; gap: 6px; font-size: 14px; }

/* App Container */
.app-container { position: absolute; top: 54px; left: 0; right: 0; bottom: 0; overflow: hidden; }
.page { position: absolute; inset: 0; display: none; background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%); }
.page.active { display: block; }
.page-scroll { height: 100%; overflow-y: auto; padding-bottom: 100px; scrollbar-width: none; }
.page-scroll::-webkit-scrollbar { display: none; }

/* Header */
.home-header { padding: 20px 24px 0; display: flex; justify-content: space-between; align-items: flex-start; }
.greeting h1 { font-size: 26px; font-weight: 700; color: var(--text-primary); letter-spacing: -0.5px; }
.subtitle { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }
.avatar-wrapper { width: 52px; height: 52px; border-radius: 50%; border: 3px solid white; box-shadow: var(--shadow-md); overflow: hidden; position: relative; cursor: pointer; }
.avatar-wrapper img { width: 100%; height: 100%; object-fit: cover; }
.notification-dot { position: absolute; top: 2px; right: 2px; width: 10px; height: 10px; background: var(--danger); border-radius: 50%; border: 2px solid white; }

/* Section */
.section-title { font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 16px; padding: 0 24px; }

/* Mood Section */
.mood-section { padding: 28px 24px 0; }
.mood-section .section-title { padding: 0; margin-bottom: 16px; }
.mood-grid { display: flex; justify-content: space-between; gap: 8px; }
.mood-item { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 8px; background: var(--bg-card); border-radius: var(--radius-md); border: 2px solid transparent; cursor: pointer; transition: all 0.2s ease; }
.mood-item:hover, .mood-item:active { transform: scale(0.96); }
.mood-item.selected { border-color: var(--primary); background: rgba(91,140,90,0.08); }
.mood-emoji { font-size: 28px; transition: transform 0.2s; }
.mood-item.selected .mood-emoji { transform: scale(1.15); }
.mood-label { font-size: 12px; color: var(--text-secondary); font-weight: 500; }

/* PM+ Hero Card */
.pm-hero-card { margin: 24px; padding: 28px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); border-radius: var(--radius-lg); color: white; position: relative; overflow: hidden; cursor: pointer; transition: transform 0.2s; }
.pm-hero-card:active { transform: scale(0.98); }
.pm-badge { font-size: 11px; font-weight: 600; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; display: inline-block; margin-bottom: 14px; backdrop-filter: blur(10px); }
.pm-hero-title { font-size: 22px; font-weight: 700; margin-bottom: 8px; line-height: 1.3; }
.pm-hero-desc { font-size: 14px; opacity: 0.9; line-height: 1.5; max-width: 85%; }
.pm-hero-progress { margin-top: 20px; display: flex; align-items: center; gap: 12px; }
.progress-bar { flex: 1; height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--accent); border-radius: 3px; transition: width 0.5s ease; }
.progress-text { font-size: 13px; font-weight: 600; opacity: 0.9; }
.pm-hero-action { display: flex; align-items: center; gap: 8px; margin-top: 20px; font-weight: 600; font-size: 15px; }
.pm-hero-action i { font-size: 12px; }
.pm-hero-bg { position: absolute; right: -20px; bottom: -30px; font-size: 140px; opacity: 0.1; }

/* Week List */
.week-section { padding-top: 8px; }
.week-list { padding: 0 24px; }
.week-card { display: flex; align-items: center; gap: 16px; padding: 18px; background: var(--bg-card); border-radius: var(--radius-md); margin-bottom: 12px; border: 2px solid transparent; cursor: pointer; transition: all 0.2s; box-shadow: var(--shadow-sm); }
.week-card:active { transform: scale(0.98); }
.week-card.active { border-color: var(--primary); box-shadow: 0 4px 20px rgba(91,140,90,0.15); }
.week-card.locked { opacity: 0.5; pointer-events: none; }
.week-card.completed { background: rgba(91,140,90,0.06); }
.week-icon { width: 52px; height: 52px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
.week-meta { flex: 1; }
.week-meta h4 { font-size: 15px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
.week-meta p { font-size: 12px; color: var(--text-secondary); }
.week-status { font-size: 12px; font-weight: 600; }
.week-status.progress { color: var(--primary); }
.week-status.done { color: var(--success); }
.week-status i { color: var(--text-muted); }

/* Homework Section */
.homework-section { padding: 8px 24px 0; }
.homework-section .section-title { padding: 0; }
.homework-card { background: var(--bg-card); border-radius: var(--radius-md); padding: 20px; box-shadow: var(--shadow-sm); }
.homework-header { display: flex; align-items: center; gap: 14px; margin-bottom: 16px; }
.homework-icon { width: 44px; height: 44px; background: rgba(91,140,90,0.1); border-radius: 14px; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 18px; }
.homework-info h4 { font-size: 15px; font-weight: 600; color: var(--text-primary); }
.homework-info p { font-size: 12px; color: var(--text-secondary); margin-top: 2px; }
.homework-progress { margin-bottom: 12px; }
.homework-progress .progress-bar { background: #E8EDE8; }
.homework-days { font-size: 13px; color: var(--text-secondary); }
.homework-btn { width: 100%; padding: 14px; background: var(--primary); color: white; border: none; border-radius: var(--radius-sm); font-weight: 600; font-size: 14px; cursor: pointer; margin-top: 16px; }

/* Assessment Hero Card */
.assessment-hero { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); border-radius: 20px; padding: 20px; display: flex; justify-content: space-between; align-items: center; margin: 0 24px 24px; cursor: pointer; border: 1px solid rgba(255,255,255,0.5); box-shadow: var(--shadow-sm); transition: transform 0.2s; }
.assessment-hero:active { transform: scale(0.98); }
.assessment-content { flex: 1; }
.assessment-content h3 { font-size: 17px; font-weight: 700; color: #1565C0; margin-bottom: 6px; }
.assessment-content p { font-size: 12px; color: #546E7A; margin-bottom: 12px; line-height: 1.4; opacity: 0.9; }
.assessment-action { display: flex; align-items: center; gap: 6px; font-size: 13px; color: #1976D2; font-weight: 600; }
.assessment-icon { width: 56px; height: 56px; background: rgba(255,255,255,0.6); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 28px; color: #1976D2; margin-left: 12px; }

/* Tools Grid */
.tools-section { padding: 24px 24px 0; }
.tools-section .section-title { padding: 0; }
.tools-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
.tool-item { display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 8px; background: var(--bg-card); border-radius: var(--radius-md); cursor: pointer; transition: transform 0.2s; }
.tool-item:active { transform: scale(0.95); }
.tool-icon { width: 44px; height: 44px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
.breath-icon { background: #E3F2FD; color: #1976D2; }
.ground-icon { background: #E8F5E9; color: #388E3C; }
.journal-icon { background: #FFF3E0; color: #F57C00; }
.sos-icon { background: #FFEBEE; color: #D32F2F; }
.tool-item span { font-size: 11px; color: var(--text-secondary); font-weight: 500; }

/* Chat Container */
.chat-container { display: flex; flex-direction: column; height: 100%; background: #F8FAF8; }
.chat-header { padding: 16px 20px; background: white; border-bottom: 1px solid var(--border-light); display: flex; align-items: center; gap: 12px; }
.back-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--bg-secondary); border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-primary); font-size: 16px; }
.counselor-info { display: flex; align-items: center; gap: 12px; flex: 1; }
.counselor-avatar { width: 44px; height: 44px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; }
.ai-avatar { background: linear-gradient(135deg, var(--accent) 0%, #D4A056 100%); }
.counselor-meta h4 { font-size: 16px; font-weight: 600; color: var(--text-primary); }
.online-status { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-secondary); }
.status-dot { width: 8px; height: 8px; background: var(--success); border-radius: 50%; }
.ai-desc { font-size: 12px; color: var(--text-secondary); }
.session-info { font-size: 12px; color: var(--text-muted); background: var(--bg-secondary); padding: 6px 12px; border-radius: 20px; }

/* Chat Messages */
.chat-messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 16px; }
.bubble { max-width: 85%; padding: 16px 20px; border-radius: 24px; font-size: 15px; line-height: 1.7; animation: bubbleIn 0.3s ease; }
@keyframes bubbleIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
.bubble.ai { background: white; align-self: flex-start; border-bottom-left-radius: 6px; box-shadow: var(--shadow-sm); color: var(--text-primary); }
.bubble.user { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 6px; box-shadow: 0 4px 12px rgba(91,140,90,0.2); }
.bubble.system { background: #FFF8E1; border: 1px solid #FFE082; align-self: center; font-size: 13px; color: #F57C00; text-align: center; max-width: 90%; }
.bubble.danger { background: #FFEBEE; border: 1px solid #FFCDD2; color: var(--danger-dark); }
.bubble b { font-weight: 600; }
.typing-indicator { display: flex; gap: 4px; padding: 16px 20px; }
.typing-dot { width: 8px; height: 8px; background: #C0C0C0; border-radius: 50%; animation: typing 1.4s infinite; }
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-6px); } }

/* Chat Input */
.chat-input-area { padding: 16px 20px; padding-bottom: calc(16px + var(--safe-bottom)); background: white; border-top: 1px solid var(--border-light); }
.input-wrapper { display: flex; gap: 12px; align-items: center; }
.input-wrapper input { flex: 1; height: 48px; background: var(--bg-secondary); border: none; border-radius: 24px; padding: 0 20px; font-size: 15px; font-family: inherit; }
.send-btn { width: 48px; height: 48px; border-radius: 50%; background: var(--primary); color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.voice-btn { width: 48px; height: 48px; border-radius: 50%; background: var(--bg-secondary); color: var(--primary); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }

/* Options & Interactions */
.options-container { display: flex; flex-direction: column; gap: 10px; margin-top: 8px; max-height: 400px; overflow-y: auto; }
.option-card { display: flex; align-items: center; gap: 14px; padding: 16px 18px; background: white; border: 2px solid var(--border-light); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; }
.option-card:hover { border-color: var(--primary-light); }
.option-card:active { transform: scale(0.98); }
.option-card.selected { border-color: var(--primary); background: rgba(91,140,90,0.04); }
.option-card i { width: 24px; color: var(--primary); font-size: 16px; }
.option-card span { flex: 1; font-size: 14px; color: var(--text-primary); }
.option-card .check { width: 22px; height: 22px; border-radius: 50%; border: 2px solid #DDD; display: flex; align-items: center; justify-content: center; font-size: 12px; color: white; }
.option-card.selected .check { background: var(--primary); border-color: var(--primary); }

/* Likert Scale */
.likert-scale { display: flex; justify-content: space-between; padding: 8px 0; margin-top: 8px; }
.likert-item { display: flex; flex-direction: column; align-items: center; gap: 10px; cursor: pointer; }
.likert-circle { width: 48px; height: 48px; border-radius: 50%; border: 2px solid #E0E0E0; display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 600; color: var(--text-secondary); transition: all 0.2s; }
.likert-item:active .likert-circle { transform: scale(0.95); }
.likert-item.selected .likert-circle { background: var(--primary); border-color: var(--primary); color: white; transform: scale(1.1); }
.likert-label { font-size: 10px; color: var(--text-muted); text-align: center; max-width: 48px; line-height: 1.3; }

/* Action Buttons */
.action-buttons { display: flex; flex-direction: column; gap: 10px; margin-top: 12px; }
.btn { width: 100%; padding: 16px; border-radius: var(--radius-md); font-size: 15px; font-weight: 600; border: none; cursor: pointer; transition: all 0.2s; font-family: inherit; }
.btn:active { transform: scale(0.98); }
.btn-primary { background: var(--primary); color: white; }
.btn-secondary { background: var(--bg-secondary); color: var(--text-primary); }
.btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
.btn-danger { background: var(--danger); color: white; }
.btn-small { padding: 12px 20px; font-size: 14px; width: auto; }

/* Bottom Navigation */
.nav-bar { position: absolute; bottom: 0; left: 0; right: 0; height: 88px; background: rgba(255,255,255,0.98); backdrop-filter: blur(20px); border-top: 1px solid var(--border-light); display: flex; justify-content: space-around; align-items: flex-start; padding-top: 12px; z-index: 100; }
.nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-muted); font-size: 10px; cursor: pointer; transition: color 0.2s; min-width: 60px; }
.nav-item i { font-size: 22px; transition: transform 0.2s; }
.nav-item.active { color: var(--primary); font-weight: 600; }
.nav-item.active i { transform: translateY(-2px); }
.ai-nav { position: relative; }
.ai-btn { width: 52px; height: 52px; background: linear-gradient(135deg, var(--accent) 0%, #D4A056 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 22px; box-shadow: 0 4px 16px rgba(232,184,109,0.4); margin-top: -20px; }
.ai-nav span { margin-top: 6px; }
.ai-nav.active .ai-btn { transform: scale(1.05); }

/* Overlay & Sheet */
.overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); z-index: 200; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
.overlay.active { opacity: 1; pointer-events: auto; }
.sheet { position: absolute; left: 0; right: 0; bottom: 0; background: white; border-radius: 28px 28px 0 0; padding: 28px 24px; padding-bottom: calc(28px + var(--safe-bottom)); z-index: 201; transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.16,1,0.3,1); max-height: 85%; overflow-y: auto; }
.sheet.active { transform: translateY(0); }
.sheet-handle { width: 40px; height: 4px; background: #E0E0E0; border-radius: 2px; margin: 0 auto 20px; }
.sheet-title { font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px; text-align: center; }
.sheet-desc { font-size: 14px; color: var(--text-secondary); text-align: center; margin-bottom: 24px; line-height: 1.6; }

/* Modal */
.modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); background: white; border-radius: var(--radius-lg); padding: 32px 24px; z-index: 202; width: calc(100% - 48px); max-width: 340px; opacity: 0; pointer-events: none; transition: all 0.3s; }
.modal.active { opacity: 1; pointer-events: auto; transform: translate(-50%, -50%) scale(1); }
.modal-icon { width: 72px; height: 72px; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 32px; }
.modal-icon.success { background: #E8F5E9; color: var(--success); }
.modal-icon.warning { background: #FFF3E0; color: var(--warning); }
.modal-icon.danger { background: #FFEBEE; color: var(--danger); }
.modal-title { font-size: 20px; font-weight: 700; text-align: center; margin-bottom: 12px; }
.modal-content { font-size: 14px; color: var(--text-secondary); text-align: center; line-height: 1.6; margin-bottom: 24px; }
.modal-actions { display: flex; gap: 12px; }
.modal-actions .btn { flex: 1; }

/* Breathing Exercise */
.breath-exercise { text-align: center; padding: 40px 20px; }
.breath-circle { width: 200px; height: 200px; border-radius: 50%; background: rgba(91,140,90,0.12); margin: 0 auto 32px; display: flex; align-items: center; justify-content: center; transition: transform 4s cubic-bezier(0.4,0,0.2,1); }
.breath-inner { width: 100px; height: 100px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: 600; }
.breath-hint { font-size: 16px; color: var(--text-secondary); margin-bottom: 8px; }
.breath-timer { font-size: 14px; color: var(--text-muted); }

/* Crisis Alert */
.crisis-banner { background: linear-gradient(135deg, #E53935 0%, #C62828 100%); color: white; padding: 20px; border-radius: var(--radius-md); margin: 16px 0; }
.crisis-banner h4 { font-size: 16px; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
.crisis-banner p { font-size: 13px; opacity: 0.95; line-height: 1.5; }
.crisis-hotline { background: rgba(255,255,255,0.15); padding: 16px; border-radius: var(--radius-sm); margin-top: 16px; text-align: center; }
.crisis-hotline .number { font-size: 24px; font-weight: 700; letter-spacing: 1px; }
.crisis-hotline .label { font-size: 12px; opacity: 0.9; margin-top: 4px; }

/* Page Header */
.page-header { padding: 20px 24px 24px; }
.page-header h1 { font-size: 28px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px; }

/* Assessment Cards */
.assess-list { padding: 0 24px; }
.assess-card { background: var(--bg-card); border-radius: var(--radius-lg); overflow: hidden; margin-bottom: 16px; box-shadow: var(--shadow-sm); cursor: pointer; transition: transform 0.2s; }
.assess-card:active { transform: scale(0.98); }
.assess-banner { height: 120px; display: flex; align-items: center; justify-content: center; font-size: 48px; }
.assess-content { padding: 20px; }
.assess-tag { font-size: 11px; font-weight: 600; padding: 5px 10px; border-radius: 6px; display: inline-block; margin-bottom: 10px; }
.assess-tag.free { background: #E8F5E9; color: #2E7D32; }
.assess-tag.pro { background: #FFF3E0; color: #E65100; }
.assess-content h3 { font-size: 17px; font-weight: 600; margin-bottom: 6px; }
.assess-content p { font-size: 13px; color: var(--text-secondary); line-height: 1.5; margin-bottom: 14px; }
.assess-meta { display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: var(--text-muted); }
.assess-price { font-size: 16px; font-weight: 700; color: var(--primary); }

/* Energy Tools Page */
.energy-tools { padding: 0 24px; }
.energy-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 24px; margin-bottom: 16px; display: flex; gap: 20px; align-items: center; cursor: pointer; transition: transform 0.2s; box-shadow: var(--shadow-sm); }
.energy-card:active { transform: scale(0.98); }
.energy-icon { width: 64px; height: 64px; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 28px; }
.energy-meta h4 { font-size: 17px; font-weight: 600; margin-bottom: 6px; }
.energy-meta p { font-size: 13px; color: var(--text-secondary); line-height: 1.4; }

/* User Profile */
.user-profile { padding: 20px 24px; }
.profile-header { text-align: center; margin-bottom: 30px; }
.profile-avatar { width: 100px; height: 100px; border-radius: 50%; border: 4px solid white; box-shadow: var(--shadow-lg); margin: 0 auto 16px; overflow: hidden; }
.profile-avatar img { width: 100%; height: 100%; object-fit: cover; }
.profile-name { font-size: 24px; font-weight: 700; margin-bottom: 6px; }
.profile-days { font-size: 14px; color: var(--text-secondary); }
.profile-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 24px; }
.stat-card { background: var(--bg-card); border-radius: var(--radius-md); padding: 16px; text-align: center; box-shadow: var(--shadow-sm); }
.stat-value { font-size: 24px; font-weight: 700; color: var(--primary); }
.stat-label { font-size: 11px; color: var(--text-secondary); margin-top: 4px; }
.profile-menu { background: var(--bg-card); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-sm); }
.menu-item { padding: 18px 20px; display: flex; align-items: center; gap: 14px; border-bottom: 1px solid var(--border-light); cursor: pointer; }
.menu-item:last-child { border-bottom: none; }
.menu-item i { width: 24px; color: var(--primary); font-size: 18px; }
.menu-item span { flex: 1; font-size: 15px; }
.menu-item .arrow { color: var(--text-muted); font-size: 14px; }

/* Assessment Options */
.assess-options { display: flex; flex-direction: column; gap: 10px; }
.assess-opt { padding: 16px 20px; background: var(--bg-secondary); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; font-size: 14px; text-align: center; border: 2px solid transparent; }
.assess-opt:hover { border-color: var(--primary-light); }
.assess-opt:active { transform: scale(0.98); background: rgba(91,140,90,0.08); border-color: var(--primary); }

/* Result Card */
.result-card { background: var(--bg-secondary); border-radius: var(--radius-md); padding: 20px; text-align: center; margin: 16px 0; }
.result-label { font-size: 13px; color: var(--text-muted); margin-bottom: 8px; }
.result-value { font-size: 36px; font-weight: 700; color: var(--primary); }
.result-hint { font-size: 12px; color: var(--text-secondary); margin-top: 8px; }

/* Achievement Card */
.achievement-card { background: linear-gradient(135deg, #FFA726 0%, #FB8C00 100%); color: white; border-radius: var(--radius-md); padding: 20px; text-align: center; margin: 16px 0; }
.achievement-icon { font-size: 40px; margin-bottom: 8px; }
.achievement-card h4 { font-size: 16px; font-weight: 700; margin-bottom: 4px; }
.achievement-card p { font-size: 13px; opacity: 0.9; }

/* Plan/Steps Card */
.plan-card, .steps-card { background: #F0F7F0; border-radius: var(--radius-md); padding: 16px; margin: 12px 0; }
.plan-card h4, .steps-card h4 { font-size: 14px; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.plan-card p, .steps-card p { font-size: 13px; color: var(--text-secondary); margin-bottom: 6px; line-height: 1.5; }

/* Tip Card */
.tip-card { background: #FFF8E1; border: 1px solid #FFE082; border-radius: var(--radius-sm); padding: 14px; font-size: 13px; line-height: 1.6; color: #F57C00; }

/* Summary/Graduation Card */
.summary-card { background: var(--bg-secondary); border-radius: var(--radius-md); padding: 16px; margin: 12px 0; }
.summary-card p { font-size: 14px; margin-bottom: 10px; line-height: 1.5; }
.graduation-card { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; border-radius: var(--radius-lg); padding: 32px 24px; text-align: center; margin: 16px 0; }
.grad-icon { font-size: 64px; margin-bottom: 16px; }
.graduation-card h3 { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
.graduation-card p { font-size: 14px; opacity: 0.95; }

/* Animations */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

/* Stat card clickable */
.stat-card { cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
.stat-card:active { transform: scale(0.95); }

/* Text utilities */
.text-danger { color: var(--danger); }
.text-success { color: var(--success); }
.text-primary { color: var(--primary); }

/* SOS Styles */
.sos-card { display: flex; align-items: center; gap: 16px; padding: 16px; background: white; border-radius: 16px; margin-bottom: 12px; border: 1px solid var(--border-light); cursor: pointer; transition: all 0.2s; box-shadow: var(--shadow-sm); }
.sos-card:active { transform: scale(0.98); background: #FAF9F8; }
.sos-icon { width: 48px; height: 48px; border-radius: 12px; background: #FFEBEE; color: #E53935; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
.sos-info { flex: 1; }
.sos-info h4 { font-size: 16px; font-weight: 600; margin-bottom: 4px; color: var(--text-primary); }
.sos-info p { font-size: 13px; color: var(--text-secondary); }
.sos-card .fa-chevron-right { color: var(--text-muted); font-size: 14px; }

/* AiLing Chat Enhancements */
.chat-menu-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--bg-secondary); border: none; color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; }

.quick-topics { display: flex; gap: 8px; padding: 12px 20px; overflow-x: auto; flex-shrink: 0; background: #F8FAF8; }
.quick-topics::-webkit-scrollbar { display: none; }
.topic-chip { display: flex; align-items: center; gap: 6px; padding: 10px 16px; background: white; border-radius: 20px; font-size: 13px; white-space: nowrap; cursor: pointer; box-shadow: var(--shadow-sm); transition: all 0.2s; border: 1px solid var(--border-light); }
.topic-chip:active { transform: scale(0.95); background: rgba(91,140,90,0.08); border-color: var(--primary); }

.ai-chat-input-area { padding: 12px 16px; padding-bottom: calc(16px + var(--safe-bottom)); background: white; border-top: 1px solid var(--border-light); }

/* ËæìÂÖ•Ê®°ÂºèÂàáÊç¢ */
.input-mode { width: 100%; }
.input-row { display: flex; gap: 10px; align-items: center; }
.input-row input { flex: 1; height: 46px; background: var(--bg-secondary); border: none; border-radius: 23px; padding: 0 20px; font-size: 15px; font-family: inherit; }
.input-row input:focus { outline: none; box-shadow: 0 0 0 2px rgba(91,140,90,0.2); }

.mode-switch-btn { width: 46px; height: 46px; border-radius: 50%; background: var(--bg-secondary); color: var(--primary); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.2s; flex-shrink: 0; }
.mode-switch-btn:active { transform: scale(0.95); background: rgba(91,140,90,0.15); }

.input-row .send-btn { width: 46px; height: 46px; border-radius: 50%; background: var(--primary); color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; }

/* ËØ≠Èü≥ËæìÂÖ•Ê®°Âºè */
.voice-input-container { display: flex; gap: 12px; align-items: center; }
.voice-record-btn { flex: 1; height: 46px; background: var(--bg-secondary); border: 2px solid var(--primary); border-radius: 23px; font-size: 15px; font-weight: 600; color: var(--primary); cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; user-select: none; -webkit-user-select: none; }
.voice-record-btn:active { background: var(--primary); color: white; transform: scale(0.98); }
.voice-record-btn::before { content: 'üé§'; font-size: 16px; }

/* ËØ≠Èü≥ÂΩïÂà∂ÂÖ®Â±èÊ®°ÊÄÅ */
.voice-recording-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); z-index: 1000; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s; }
.voice-recording-modal.active { display: flex; opacity: 1; }

.voice-modal-content { text-align: center; color: white; padding: 40px; }

/* ÂèñÊ∂àÂå∫Âüü */
.voice-cancel-zone { position: absolute; top: 60px; left: 50%; transform: translateX(-50%); padding: 16px 32px; background: rgba(255,255,255,0.1); border-radius: 30px; display: flex; align-items: center; gap: 10px; opacity: 0.6; transition: all 0.3s; }
.voice-cancel-zone.active { opacity: 1; background: #E53935; }
.voice-cancel-zone i { font-size: 18px; }
.voice-cancel-zone span { font-size: 14px; font-weight: 500; }

/* ËØ≠Èü≥ËßÜËßâÊïàÊûú */
.voice-visual { position: relative; width: 180px; height: 180px; margin: 60px auto 40px; display: flex; align-items: center; justify-content: center; }

.voice-ripple { position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 2px solid rgba(91,140,90,0.4); animation: voiceRipple 2s infinite ease-out; }
.voice-ripple.delay-1 { animation-delay: 0.5s; }
.voice-ripple.delay-2 { animation-delay: 1s; }

@keyframes voiceRipple {
    0% { transform: scale(0.8); opacity: 1; }
    100% { transform: scale(1.5); opacity: 0; }
}

.voice-mic-circle { width: 100px; height: 100px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 32px rgba(91,140,90,0.4); animation: micPulse 1s infinite ease-in-out; }
.voice-mic-circle i { font-size: 40px; color: white; }

@keyframes micPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

.voice-status { font-size: 20px; font-weight: 600; margin-bottom: 8px; letter-spacing: 1px; }
.voice-timer { font-size: 48px; font-weight: 700; font-family: 'Inter', monospace; margin-bottom: 24px; color: var(--accent); text-shadow: 0 2px 10px rgba(232,184,109,0.5); }
.voice-hint { font-size: 13px; opacity: 0.7; }

/* ÂèñÊ∂àÊó∂ÁöÑÊ†∑ÂºèÂèòÂåñ */
.voice-recording-modal.canceling .voice-mic-circle { background: linear-gradient(135deg, #E53935 0%, #C62828 100%); animation: none; }
.voice-recording-modal.canceling .voice-ripple { border-color: rgba(229,57,53,0.4); }
.voice-recording-modal.canceling .voice-status { color: #E53935; }

/* Typing Indicator */
.typing-bubble { display: flex; gap: 4px; padding: 16px 20px; background: white; border-radius: 24px; border-bottom-left-radius: 6px; align-self: flex-start; box-shadow: var(--shadow-sm); }
.typing-bubble span { width: 8px; height: 8px; background: #C0C0C0; border-radius: 50%; animation: typingBounce 1.4s infinite; }
.typing-bubble span:nth-child(2) { animation-delay: 0.2s; }
.typing-bubble span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-6px); } }

/* 3D Muyu (Wooden Fish) */
.muyu-wrapper { position: relative; width: 100%; height: 300px; display: flex; justify-content: center; align-items: center; overflow: hidden; perspective: 1000px; }
.muyu-container { position: relative; width: 200px; height: 180px; cursor: pointer; user-select: none; -webkit-tap-highlight-color: transparent; z-index: 10; transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.muyu-container:active { transform: scale(0.95); }

/* Êú®È±º‰∏ª‰Ωì */
.muyu-body { position: relative; width: 200px; height: 160px; background: radial-gradient(circle at 40% 30%, #c49a6c, #8b5a2b); border-radius: 55% 45% 40% 40% / 50% 50% 40% 40%; box-shadow: inset -10px -10px 30px rgba(0,0,0,0.4), inset 5px 5px 20px rgba(255,255,255,0.3), 0 20px 40px rgba(0,0,0,0.4); z-index: 2; position: relative; }
/* Êú®È±ºÁ∫πÁêÜ‰∏éÂÖâÊ≥Ω */
.muyu-body::after { content: ''; position: absolute; top: 10%; left: 10%; width: 80%; height: 60%; border-radius: 50%; background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 60%); pointer-events: none; }
/* ÈïÇÁ©∫Èü≥Â≠î */
.muyu-mouth { position: absolute; top: 50%; left: 15%; width: 70%; height: 20px; background: #3e2723; border-radius: 50%; transform: rotate(-5deg); box-shadow: inset 0 5px 10px rgba(0,0,0,0.8); opacity: 0.8; }
.muyu-eye { position: absolute; top: 40%; right: 15%; width: 20px; height: 20px; background: #3e2723; border-radius: 50%; box-shadow: inset 2px 2px 5px rgba(0,0,0,0.6); }

/* Êï≤ÂáªÊ£í */
.muyu-stick { position: absolute; top: 20px; right: -40px; width: 120px; height: 10px; background: #8d6e63; border-radius: 10px; pointer-events: none; z-index: 5; transform-origin: 100% 50%; transform: rotate(15deg); transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1); }
/* Ê£íÂ§¥ */
.muyu-stick::after { content: ''; position: absolute; left: -10px; top: 50%; transform: translateY(-50%); width: 34px; height: 34px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #6d4c41, #3e2723); box-shadow: -2px 4px 8px rgba(0,0,0,0.3); }
/* Ê£íÊüÑÁ∫πÁêÜ */
.muyu-stick-handle { display: none; } /* Â∫üÂºÉÊóßÁªìÊûÑ */
.muyu-stick-head { display: none; } /* Â∫üÂºÉÊóßÁªìÊûÑ */

/* Êï≤ÂáªÂä®ÁîªÁä∂ÊÄÅ */
.muyu-container.tapping .muyu-stick { transform: rotate(45deg); transition: transform 0.05s ease-out; }
.muyu-container.tapping .muyu-body { transform: scale(0.98) translateY(2px); }

/* ÂäüÂæ∑ÊñáÂ≠óÂä®Áîª */
.merit-text { position: absolute; left: 50%; top: 40%; transform: translateX(-50%); font-size: 24px; font-weight: 800; color: #fff; pointer-events: none; animation: floatUpFade 0.8s ease-out forwards; text-shadow: 0 2px 8px rgba(0,0,0,0.3); white-space: nowrap; z-index: 20; }
@keyframes floatUpFade { 0% { opacity: 1; transform: translate(-50%, 0) scale(0.8); } 50% { opacity: 1; transform: translate(-50%, -60px) scale(1.2); } 100% { opacity: 0; transform: translate(-50%, -100px) scale(1); } }

/* Ê∂üÊº™ÊïàÊûú */
.muyu-ripple { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 10px; height: 10px; border-radius: 50%; background: rgba(255, 255, 255, 0.4); animation: rippleEffect 0.6s ease-out forwards; pointer-events: none; z-index: 1; }
@keyframes rippleEffect { 0% { width: 10px; height: 10px; opacity: 0.6; } 100% { width: 250px; height: 250px; opacity: 0; } }

/* ---------------- ÂøÉÁêÜÂõæË∞± (Mind Graph) ---------------- */
.mind-graph-card {
    background: white;
    padding: 20px;
    border-radius: 16px;
    margin: 20px 0;
    box-shadow: 0 4px 12px rgba(91, 140, 90, 0.08); /* ÈÄÇÈÖçÊ£ÆÁ≥ªÈò¥ÂΩ± */
}

.mind-graph-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.mind-graph-card h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-dark);
}

.update-badge {
    font-size: 0.75rem;
    color: var(--primary);
    background: rgba(91, 140, 90, 0.1);
    padding: 4px 8px;
    border-radius: 12px;
}

.radar-container {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 0 auto;
}

.radar-bg {
    width: 100%;
    height: 100%;
    transform: rotate(30deg); /* È°∂ÁÇπÊúù‰∏ä */
}

.radar-grid { fill: none; stroke: #E0E0E0; stroke-width: 1; }
.radar-grid-inner { fill: none; stroke: #E0E0E0; stroke-width: 1; stroke-dasharray: 4 2; }

.radar-area {
    fill: rgba(91, 140, 90, 0.5); 
    stroke: var(--primary);
    stroke-width: 2;
    transition: all 1s cubic-bezier(0.4, 0, 0.2, 1); 
}

.radar-label {
    position: absolute;
    font-size: 12px;
    color: #666;
    background: rgba(255,255,255,0.8);
    padding: 2px 5px;
    border-radius: 4px;
    white-space: nowrap;
}

/* ÂÖ≠ËæπÂΩ¢Ê†áÁ≠æÂÆö‰Ωç */
.label-top { top: -10px; left: 50%; transform: translateX(-50%); }
.label-tr { top: 25%; right: -25px; }
.label-br { bottom: 25%; right: -25px; }
.label-bottom { bottom: -10px; left: 50%; transform: translateX(-50%); }
.label-bl { bottom: 25%; left: -25px; }
.label-tl { top: 25%; left: -25px; }

.graph-tip {
    text-align: center;
    font-size: 11px;
    color: #999;
    margin-top: 15px;
}

/* ---------------- ‰ªòË¥πËß£ÈîÅÊ®°ÊÄÅÊ°Ü ---------------- */
.pay-modal-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6); z-index: 2000;
    display: none; align-items: center; justify-content: center;
    backdrop-filter: blur(5px);
}

.pay-modal {
    background: white; width: 85%; max-width: 320px;
    border-radius: 20px; padding: 25px; text-align: center;
    position: relative;
    animation: popup 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

@keyframes popup { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

.pay-icon { font-size: 48px; margin-bottom: 15px; display: block; }
.pay-title { font-size: 1.2rem; font-weight: 700; color: #333; margin-bottom: 10px; }
.pay-desc { font-size: 0.9rem; color: #666; margin-bottom: 20px; line-height: 1.5; }
.pay-price { font-size: 1.8rem; font-weight: 800; color: #E8B86D; margin-bottom: 25px; display: block; }
.pay-price small { font-size: 0.9rem; font-weight: normal; color: #999; }

.pay-btn {
    background: linear-gradient(135deg, #E8B86D 0%, #C69C56 100%);
    color: white; border: none; padding: 14px 0; width: 100%;
    border-radius: 12px; font-size: 1rem; font-weight: 600;
    cursor: pointer; box-shadow: 0 4px 15px rgba(232, 184, 109, 0.4);
    transition: transform 0.2s;
}
.pay-btn:active { transform: scale(0.98); }

.pay-close {
    position: absolute; top: 15px; right: 15px;
    color: #ccc; font-size: 24px;
    background: none; border: none; cursor: pointer;
}

/* ---------------- AiLing Êé®ËçêÂç°Áâá ---------------- */
.recommend-card {
    background: white; border-radius: 12px;
    padding: 12px 16px; margin-top: 10px;
    border: 1px solid #f0f0f0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    display: flex; align-items: center; gap: 12px;
    cursor: pointer; transition: all 0.2s;
}
.recommend-card:active { transform: scale(0.98); background: #fafafa; }
.recommend-icon {
    width: 40px; height: 40px;
    background: var(--primary-light);
    border-radius: 50%; display: flex;
    align-items: center; justify-content: center;
    color: var(--primary); font-size: 18px;
}
.recommend-content h4 { margin: 0; font-size: 14px; color: #333; font-weight: 600; }
.recommend-content p { margin: 4px 0 0 0; font-size: 12px; color: #888; }
/* ==================== ÊãñÊãΩÂàÜÁ±ª‰∫§‰∫íÊ†∑Âºè ==================== */
.drag-classify-container { padding: 8px 0; }

.drag-zone {
    width: 100%;
    min-height: 120px;
    border-radius: var(--radius-md);
    padding: 16px;
    margin-bottom: 12px;
    border: 2px dashed #E0E0E0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.drag-zone.solvable { background: #F1F8E9; border-color: #C5E1A5; }
.drag-zone.unsolvable { background: #FFEBEE; border-color: #FFCDD2; }

.drag-zone.drag-over { 
    transform: scale(1.02);
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(91,140,90,0.15);
}

.zone-header {
    font-size: 13px;
    font-weight: 700;
    margin-bottom: 12px;
    text-align: center;
}
.solvable .zone-header { color: #558B2F; }
.unsolvable .zone-header { color: #C62828; }

.drag-source {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    background: #FAFAFA;
    padding: 16px;
    border-radius: var(--radius-md);
    min-height: 80px;
}

.drag-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    background: white;
    border-radius: 20px;
    font-size: 13px;
    box-shadow: var(--shadow-sm);
    cursor: grab;
    border: 1px solid var(--border-light);
    transition: all 0.2s;
    user-select: none;
}
.drag-item:active { cursor: grabbing; transform: scale(1.05); }

.drag-item.dragging { opacity: 0.5; }
.drag-item.dropped { cursor: default; }

.zone-items .drag-item {
    width: 100%;
    margin-bottom: 8px;
    box-shadow: none;
    background: rgba(255,255,255,0.8);
}

.classify-hint {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}
.hint-box {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    line-height: 1.4;
    text-align: center;
}
.hint-box.solvable { background: #F1F8E9; color: #33691E; }
.hint-box.unsolvable { background: #FFEBEE; color: #B71C1C; }
.hint-box small { font-weight: 400; opacity: 0.8; }

/* ==================== ËØ≠Èü≥ËæìÂÖ•Ê†∑ÂºèÔºàPM+‰∏ìÁî®Ôºâ ==================== */
.voice-input-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.voice-text-input input {
    width: 100%;
    padding: 14px 18px;
    border-radius: 20px;
    border: 1px solid #E0E0E0;
    background: #F5F5F5;
    font-size: 14px;
    outline: none;
    transition: all 0.2s;
}
.voice-text-input input:focus {
    background: white;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(91,140,90,0.1);
}

.voice-record-btn {
    width: 100%;
    padding: 14px;
    border-radius: 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    color: var(--primary);
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s;
}
.voice-record-btn:active { background: #F5F5F5; transform: scale(0.98); }

.voice-record-btn.recording {
    background: #FFEBEE;
    color: #E53935;
    border-color: #FFCDD2;
}

/* ==================== È™åËØÅÂç°ÁâáÂàóË°® ==================== */
.verify-card {
    background: #E8F5E9;
    padding: 24px;
    border-radius: 24px;
    text-align: center;
    margin: 16px 0;
    position: relative;
    overflow: hidden;
}
.verify-num {
    position: absolute;
    top: 12px;
    right: 12px;
    font-size: 12px;
    background: rgba(255,255,255,0.5);
    padding: 4px 10px;
    border-radius: 12px;
    color: var(--primary-dark);
}
.verify-card h4 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.solution-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 12px 0;
}
.solution-tag {
    padding: 8px 14px;
    background: #F1F8E9;
    color: #33691E;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
}

.case-card, .feedback-card {
    background: #FFF8E1;
    border: 1px solid #FFE082;
    border-radius: 16px;
    padding: 16px;
    margin: 12px 0;
}
.case-card h4 { color: #F57C00; margin-bottom: 8px; font-size: 14px; }
.feedback-card { background: #E3F2FD; border-color: #90CAF9; color: #1565C0; text-align: center; font-weight: 600; }
